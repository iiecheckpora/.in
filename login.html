<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Volunteer Portal Login</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f4f4f4; }
        .login-container { padding: 2rem; background: white; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 8px; }
        input { display: block; width: 100%; padding: 8px; margin-bottom: 1rem; }
        button { width: 100%; padding: 10px; background-color: #007BFF; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Portal Login</h2>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
            <p id="status" style="color:red;"></p>
        </form>
    </div>
    <script>
        // PASTE YOUR WEB APP URL HERE
        const API_URL = "https://script.google.com/macros/s/AKfycbxvsvo97xY-vjAzsmjE8QlCIowTfPSFF_QDMgMcmKBSqHXFZqQX5KrkBvrFZU_it3sxJA/exec";

        document.getElementById("loginForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            document.getElementById("status").textContent = "Logging in...";

            fetch(`${API_URL}?action=login&email=${email}&password=${password}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === "success") {
                        localStorage.setItem("userEmail", data.email);
                        localStorage.setItem("userRole", data.role);
                        if (data.role === "Admin") {
                            window.location.href = "admin.html";
                        } else {
                            window.location.href = "volunteer.html";
                        }
                    } else {
                        document.getElementById("status").textContent = "Error: " + data.message;
                    }
                })
                .catch(error => {
                    document.getElementById("status").textContent = "Login failed. Check console for details.";
                    console.error("Error:", error);
                });
        });
    </script>
</body>
</html>